

<%layout('boilerplate')%>
<title>HOME</title>

<body style="background-image:url('<%= user.username ==  `admin` ?`https://raw.githubusercontent.com/john-fermadez/project/main/assets/background-images/admin.jpg`:`https://github.com/john-fermadez/step-images/blob/main/assets/background-images/consumer.jpg?raw=true` %>');">
<section class="right <%= user.username ==  `admin` ?`adminBg`:`userBg` %>" >
    <form action="/logout" method="GET"><button class='logoutBtn'>LOGOUT</button></form>
            <div class="circleBox" style="margin:29px;"> 
                <div class="circle" style="background-color:white;height:50px;width:50px;border-radius:100%;"></div>
                <h6 style="color:white;margin-top:15px;margin-left:7px;"><%=user.username%> </h6>
            </div>
            <form action="/home" method="GET"><button style="color:#237DB6;top:210px;" class="addBtn util-up">HOME</button></form> 
            <% if (user.username=='admin'){ %>  
            <form action="/additem" method="GET"><button class="addBtn">ADD ITEM</button></form>
            <%}else{%>
                <form action="/myBag" method="GET">
                    <button class="addBtn"><var style="font-style:normal;">MY BAG<sup class="supersript">    <%=user.userarr.length%></sup></var></button>
                </form> 
                <%}%>

                <div class="rightBottomImg"></div>
</section>
<h6 style="display:inline-block;color:white; margin-left:27px;margin-bottom:24px;margin-top:27px;">Hello,</h6><h3 style="display:inline-block;color:white ; " ><%=user.username%> </h3>


<div class='emptyContainerOuter <%= cartCount ==  0?``:"hide" %>'>
    <div class="gap ">
       
        <div class="emptyLogo" style="background-image:url('https://github.com/john-fermadez/step-images/blob/main/assets/Icons/bag-empty.png?raw=true');" ></div>
        <%if(user.username=='admin'){%>
        <h2 class="emptyMsg1"> YOUR STORE IS EMPTY<h6 class="emptyMsg2">Add Items to it now</h6></h2>
        <form action="/additem" method="GET"><button class="btns emptyBtn">ADD ITEM</button></form>
        <%} else{%>
            <h2 class="emptyMsg1"> NO PRODUCTS ARE AVAILABLE<h6 class="emptyMsg2">AT THIS MOMENTS</h6></h2>  
            <%}%>
    </div>
</div>



<%if(cartCount!=0){%>
    <div class='containerOuter'>
        <h4 class='menHeading' style="color:white;height:0;width:0;display:block;margin:2px;">MEN</h4>
        <br><br>

                                                        <!-- MEN -->
    <% for(itemIterator of item){%> 
        <% if(itemIterator.category==='Men') {%> 
       <div class="menContainer container">    

        <div class='row'>
            <form action="/details/<%=itemIterator._id%>" class='form' method="GET">
                <div class='box '>
                    
                    <div class="img" style="background-image:url('<%=itemIterator.url%>');"> </div>
                    <div class="box-bottom">
                    <div class=priceTag>$<%=itemIterator.price%></div>
                    <!-- FOR PRODUCTNAME -->
                    <%let len=`${itemIterator.itemname}`.length,final='',str=`${itemIterator.itemname}`;%>
                    <% if(len>15){%>
                     <%for(let i=0;i<len;i++){%>
                      <%final=final+str[i]; %>
                      <%if(i==15){%>
                      <%final=final+`........`;%>
                      <%break;%>
                      <%}%>

                     <%}%>
                     <h6 class="name"><%=`${final}`%> </h6> 
                    <%} else{%>
                    <h6 class="name"><%=itemIterator.itemname%> </h6> 
                    <%}%>
                       <!-- FOR MANUFACTURER NAME -->
                    <% len=`${itemIterator.manufacturerName}`.length,final='',str=`${itemIterator.manufacturerName}`;%>
                    <% if(len>14){%>
                     <%for(let i=0;i<len;i++){%>
                      <%final=final+str[i];%>
                      <%if(i==14){%>
                      <%final=final+`........`;%>
                      <%break;%>
                      <%}%>

                     <%}%>
                     <h6 class="mname"><%=`${final}`%> </h6> 
                    
                    <%} else{%>
                    <h6 class="mname"><%=itemIterator.manufacturerName%> </h6> 
                    <%}%>

                  
                    <h6 class="rating"> Rating:<%=itemIterator.rating%></h6>
                    </div>
                    <button class="bigButton" type='submit' ></button>
                </div>
            </form> 
            <!-- < %= cartCount ==  0?``:"hide" %>'  -->
            
            <% if (!(user.username==='admin')){ %>  


             
                <%const arr=user.userarr;let found='';%>
                <%for(let i=0;i<arr.length;i++){ %>
                    <%if(itemIterator._id==arr[i]){%> 
                            <%found=true;%>
                            <%break;%>
                        <%} else{%>   
                            <%found=false;%>
                            <%}%>
                    <%  }%>



                <form action="/buy" class='form' method="POST" >
                    <button style="z-index:<%= found ==  true? `0`:`2` %>"  name="itemid" value="<%=itemIterator._id%>" class='btns' onclick="getId(this)" name="<%itemIterator.itemname%>"><div class="btnImg"> </div>BUY</button>
                        <div  onclick="getId(this)" class="btnsBefore "><div class="btnImg2"> </div>ADDED</div> 
                </form>    
                    <% } %> 
        </div>       
    </div>
             <% } %>  
             <% } %>
             
 
       
            
                                                       <!-- WOMEN -->
             <div class="break" style="display:block;width:100%;";></div>
             <h4 class='menHeading' style="color:white;height:0;width:0;display:block;margin:2px;">WOMEN</h4>
             <% for(itemIterator of item){%> 
                <% if(itemIterator.category==='Women') {%> 
               <div class="womenContainer container">    
        
                <div class='row'>
                    
                    <form action="/details/<%=itemIterator._id%>" class='form' method="GET">
                        <div class='box'>
                            <div class="img" style="background-image:url('<%=itemIterator.url%>');"> </div>
                            <div class="box-bottom">
                                <div class=priceTag>$<%=itemIterator.price%></div>
                <!-- FOR PRODUCTNAME -->
                <%let len=`${itemIterator.itemname}`.length,final='',str=`${itemIterator.itemname}`;%>
                    <% if(len>15){%>
                     <%for(let i=0;i<len;i++){%>
                      <%final=final+str[i];%>
                      <%if(i==15){%>
                      <%final=final+`........`;%>
                      <%break;%>
                      <%}%>

                     <%}%>
                     <h6 class="name"><%=`${final}`%> </h6> 
                    
                    <%} else{%>
                    <h6 class="name"><%=itemIterator.itemname%> </h6> 
                    <%}%>

                    <!-- FOR MANUFACTURER NAME -->
                    <% len=`${itemIterator.manufacturerName}`.length,final='',str=`${itemIterator.manufacturerName}`;%>
                    <% if(len>14){%>
                     <%for(let i=0;i<len;i++){%>
                      <%final=final+str[i];%>
                      <%if(i==14){%>
                      <%final=final+`........`;%>
                      <%break;%>
                      <%}%>

                     <%}%>
                     <h6 class="mname"><%=`${final}`%> </h6> 
                    
                    <%} else{%>
                    <h6 class="mname"><%=itemIterator.manufacturerName%> </h6> 
                    <%}%>
                                
                                <h6 class="rating"> Rating:<%=itemIterator.rating%></h6>
                                </div>
                            <button class="bigButton" type='submit'></button>
                        </div>
                    </form> 
                    <% if (!(user.username==='admin')){ %>  



                        <%const arr=user.userarr;let found='';%>
                        <%for(let i=0;i<arr.length;i++){ %>
                            <%if(itemIterator._id==arr[i]){%> 
                                    <%found=true;%>
                                    <%break;%>
                                <%} else{%>   
                                    <%found=false;%>
                                    <%}%>
                            <%  }%>



                        <form action="/buy" class='form' method="POST" >
                            <button style="z-index:<%= found ==  true? `0`:`2` %>"  name="itemid" value="<%=itemIterator._id%>" class='btns' onclick="getId(this)" name="<%itemIterator.itemname%>"><div class="btnImg"> </div>BUY</button>
                            <div class="btnsBefore"><div class="btnImg2"> </div>ADDED</div> 
                        </form>    
                    
                    
                            <% } %> 
                </div>       
            </div>
                     <% } %>  
                     <% } %>

<%}%>
   

              
</body>        
             
             
 <script>
    
    function getId(btns)
            {
                btns.style.zIndex="0"; 

            }
</script>
                



<style>
 
 .rightBottomImg
 {
   height:105px;
   width:105px;
   top:80%;
   left:50%;
   transform:translateX(-50%);
   position:absolute;
   background-image:url('https://github.com/john-fermadez/step-images/blob/main/assets/Logo/mybagshop-white.png?raw=true');
   background-size:contain;
   background-repeat: no-repeat;
 background-position:fit;
 

 }
   .btns
{
    background-color:#237DB6;
    border-radius:30px;
    position:relative;
    display:flex;
    justify-content:center;
    align-items:center;
   margin-right:22px;
    border-color:transparent;
    color:white;
    height:30px;
    width:110px;
    font-size:13px;
    z-index:2;
}

.btnImg
    {
        background-image:url('https://github.com/john-fermadez/step-images/blob/main/assets/Icons/shopping-bag.png?raw=true');
        /* background-color:white; */
        width:15px;
        height:15px;
        transform:translateX(-200%);
       display:absolute;
        background-size:contain;
      position:absolute;
    }
    .btnsBefore
   {
     height:30px;
     width: 110px; 
     z-index:1;
     position:relative;
     transform:translateY(-100%);
     border-radius:30px;

     display:flex;
    justify-content:center;
    align-items:center;
   font-size:13px;
  
     background-color:black;
     color:white;
     
   }

   .btnImg2
    {
        background-image:url('https://github.com/john-fermadez/step-images/blob/main/assets/Icons/tick.png?raw=true');
        /* background-color:white; */
        width:15px;
        height:15px;
        transform:translateX(-250%);
       display:absolute;
       
        background-size:contain;
        background-position:center;
        background-repeat: no-repeat;
      position:absolute;
    }
   .adminBg
{
background-color:#000000;
}
.userBg
{
background-color:rgba(0,0,0,0.7);
}
   

 .emptyContainerOuter
    {
        background-color:rgba(0, 0, 0, 0.5);
  
  backdrop-filter: blur(0px);
  border-radius:0px 16px 0px 0px;;
  margin-left:0px;
   width:78%;
   height:88vh;
   position:relative;
   display:flex;
   flex-direction:row;
   flex-wrap:wrap;
    }
    .emptyLogo
    {
        background-image:url("https://raw.githubusercontent.com/john-fermadez/step-images/main/assets/Icons/bag-empty.png");
        width:25%;
        height:25%;
        background-size:cover;
        position:absolute;
        top:20%;left:12%;
    }
    .emptyMsg1
    {
        position:absolute;
        top: 50%;left:10%;
        font-weight:300;
    }
    .emptyMsg2
    {
        position:absolute;
        top:60%;left:17%;
    }
    .emptyBtn
    {
        position:absolute;
        top:70%;left:17%;
    }
    .gap
    {
        display:relative;;
        width:100%;
        height:100vh;
        /* background-color:blue; */
        color:white;
    }
    .supersript
    {
        background-color:#EF7D21;
        border-radius:100%;
        width:15px;
        height:15px;
        position:absolute;
        display:flex;
        flex-direction:row;
        justify-content:center;
        align-items:center;
        left:100%;
    }
    .bigButton
    {
        width:100%;
         height:100%; 
        position:absolute;
        /* background-color:white; */
        border:none;
        top:0%;
        bottom:0%;
        left:0%;
        right:0%;
         background-color: transparent;
    }
.hide
{
    display:none;
}
.box-bottom
{
color:white;
z-index:5;
position:absolute;
top:100%;
transform:translateY(-100%);
position:relative;
/* background-color:hotpink; */
width:100%;
height: 40%;
}
.priceTag
{
    
    height:20px;
    background-color:black;
    text-align:center;
    width:40%;
    height:38px;
    font-size:25px;
    border-radius:0px 8px 0px 0px;
    position:absolute;
    color:#BED331;
    top:2%;
    left:5%;
}
.name
{
font-size:14px;
font-weight:400;
position:absolute;
top: 50%;left:6%;
}
.mname
{
    font-size:12px;
    font-weight:200;
    position:absolute;
    top:80%;left:6%;
}
.rating
{
    font-size:10px;
    top: 80%;left:70%;
    position:absolute;
   color:#EF7D21;
}
  .btn
{
    background-color:#237DB6;
    border-radius:30px;
    border-color:transparent;
    position:absolute;
    padding:7px 30px;
   
    top:100%;
     left:4%;
    transform:translateY(-150%);
    color:white;
}


  .btn:hover
{
 cursor:pointer;
}
    .gap
    {
        display:block;
        width:100%;
        height:500px;
    }
   .row{
   
     width:80%;
     margin-bottom:30px;
    display:flex;
    flex-direction:row;
    flex-wrap:wrap;
    justify-content:space-around;
}
.containerOuter
{ 
   background-color:rgba(0, 0, 0, 0.5);
  
   /* backdrop-filter: blur(0px); */
   border-radius:0px 16px 0px 0px;;
   margin-left:0px;
    width:78%;
    position:relative;
    display:flex;
    flex-direction:row;
    flex-wrap:wrap;
}
.container{
    margin-top: 30px;
    width:240px;
}



body
{

 background-size:cover;
 background-position:fit;
 background-attachment:fixed;

}


.right {
    height:100%;
    bottom:0px;
    left:20px;
    width:19%;
    backdrop-filter:blur(3px);
   position:fixed;
  left:81%;
    
}
.logoutBtn
{
    position:absolute;
    left:100%;
    top:4px;
    transform:translateX(-100%);
    background-color:transparent;
    color:white;
   border:none;
}

.addBtn
{
    position:absolute;
    left:9%;
    top:260px;
   
    background-color:transparent;
    color:white;
   border:none;
}
.hide{
    display:none;
}
.box
{
    width:176px;
    height:253px;
    position:relative;
    background-color:rgb(0, 0, 0);
    margin:10px;
    
    border:1px solid black;
    /* display:block; */
    border-radius:0px 10px 0px 0px;
}
.form{
    width:fit-content;
    
}
.box:active
{
    background-color:#237DB6;
}

.img
{
    width:155px;
    height: 180px;
    position:absolute;
    margin-left:10px;
    margin-top:10px;
    border-radius:0px 10px 0px 0px;
    background-size:cover;
}

    </style>